<!DOCTYPE html>

<html>
<head>
    <title>ë³´ê°•(ë³´ëŠ”ê°•ì˜)</title>

<!-- stylesheet / css -->
    <link rel="stylesheet" type="text/css" href = "/static/css/learning.css">
    <link rel="stylesheet" type="text/css" href = "https://getbootstrap.kr/docs/5.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href = "https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

<!-- ì‚¬ì´ë“œ ë©”ë‰´ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript" src="/static/js/sidemenu.js"></script>

<!-- ìœ íŠœë¸Œ ë™ì˜ìƒ ì œì–´ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src='https://www.youtube.com/iframe_api'></script>
    <script>
    var player

    function youtube(){
        var video_id = '{{(video_id)}}';
        player = new YT.Player("youtube", {
        width: 1600,
        height: 900,
        videoId: video_id,
    });
    };
    
    function convert(input) {
    
        const afterStr = input.split(':');
    
        let hour = 0;
        let minutes = 0;
        let seconds = 0;
    
        if (afterStr.length == 3) { //ì‹œ:ë¶„:ì´ˆ ì¼ë•Œ
        hour = +afterStr[0]; //ì‹œ
        minutes = +afterStr[1]; //ë¶„
        seconds = +afterStr[2]; //ì´ˆ
    
        } else { //ë¶„:ì´ˆ ì¼ë•Œ
    
        minutes = +afterStr[0]; //ì‹œ
        seconds = +afterStr[1]; //ë¶„
    
        }
        const result = hour * 3600 + minutes * 60 + seconds;
    
        return result;
    }
    
    
    $(function () {
        $(".seekTo").click(function () {
        const seektime = $(this).html();
        const seekto_s = convert(seektime);
        player.seekTo(seekto_s);
        })
    })
    </script>

</head>

    <!-- BODY(ë³¸ë¬¸) -->
<body onload="youtube()">
    {% include '/include/nav.html'%}
<div id="container">
    <div id="mainvideo">
        <div id = 'mainvideotitle'>
        <p>{{vi_title}}<hr> </p>
        </div>

        <div id="youtube">
        </div>

        <div style="position: absolute; margin-top: 10px;">
            <a style="text-decoration: none; color: black;" target="_blank" href="https://www.youtube.com/channel/{{ch_id}}">
                <img src="{{ch_img}}" style='border: 1px; border-radius: 50%; width: 50px; height: 50px;'> 
        </div>
        <div style="position: absolute; position: relative; left: 60px; top:7px">
            <span style="font-size: 20px;">{{ch_title}}</span><br> 
            </a>
            <span style="font-size: 15px;">{{ch_subscriber}}</span>
        </div>
        <div style="position: relative;">
            <br>
            {%for vi_description in vi_description%}
            <span style="font-size: 15px;">
                {{vi_description}}<br>
            </span>
            {%endfor%}

        </div>
    </div>

        <div id = "sidemenu">
                <button onclick="show('videoinfo');" >ë™ì˜ìƒì •ë³´</button>
                <br>
                <br>
                <button onclick="show('videotext');">ì˜ìƒë‚´ìë§‰</button>
                <br>
                <br>
                <button onclick="show('qna');">QnA</button>
                <br>
                <br>
                <button onclick="show('reco');">ìœ íŠœë¸Œ<br>ì¶”ì²œì˜ìƒ</button>
                <br>
                <br>
        </div>
    
    <div id="videoinfo">
        <div class="sidemenutitle">
        ë™ì˜ìƒ ì •ë³´ 
        <button class ='sidemenuclose' onclick="hide('videoinfo');">
        >
        </button>
        </div>
        <hr>
        <div class="sidemenutext">
        <span class="videoinfotext">ì¬ìƒì‹œê°„ â³</span> : {{vi_duration}} <br><br>
        <span class="videoinfotext">ìœ íŠœë¸Œ ì¡°íšŒìˆ˜ ğŸ‘€</span> : {{vi_view_count}}íšŒ <br><br>
        <span class="videoinfotext">ìœ íŠœë¸Œ ì¢‹ì•„ìš” ğŸ‘ğŸ»</span> : {{vi_like_count}}ê°œ <br><hr style="margin-bottom: 25px;">

        <span class="hashtag"> ANN's í•´ì‹œíƒœê·¸</span>
        <br>
        <br>
        {%for hash_keybert in hash_keybert%}
        <span style="color: blue; font-size: 17px;"> #{{hash_keybert}} </span>
        {%endfor%}
        <br>
        <br>
        <br>
        <span class="hashtag"> Youtube í•´ì‹œíƒœê·¸</span>
        <br>
        <br>
        {%for hash_youtube in hash_youtube%}
        <span style="color: blue; font-size: 17px;"> #{{hash_youtube}} </span>
        {%endfor%}
        
        
        <!-- <center>
        <span class="sidetextbutton">ìœ íŠœë¸Œ ì¶”ì²œì˜ìƒ</span>
        </center><br>

        {%for reco in range(0,10)%}
        <a style="text-decoration: none; color: black;" target="_blank" href="{{reco_url[reco]}}">
        
        <img style="width: 416px; height: 234px;" target="_blank"  src="{{reco_thumbnails[reco]}}" alt="ì¸ë„¤ì¼" >
        <p style="font-size: 18px;"> {{reco_title[reco]}} </p>
        </a>
        {%endfor%} -->
        </div>
    </div>

    <div id="videotext">
        <div class="sidemenutitle">
        ì˜ìƒ ë‚´ ìë§‰
        <button class ='sidemenuclose' onclick="hide('videotext');">
        >
        </button>
        </div>
        <hr>
        <div class="sidemenutext">
            <script type="text/javascript">
                function filter(){
            
                var inputvalue, outputtext, item, i, index;
            
                inputvalue = document.getElementById("value").value.toUpperCase();

                item = document.getElementsByClassName("videotextlist");
                

                for(i=0; i < item.length; i++){
                    outputtext = item[i].getElementsByClassName("checked");
                    index = outputtext[0].innerHTML.toUpperCase().indexOf(inputvalue)

                    if(index >= 0){
                        //innerHTML = outputtext[0].innerHTML.substring(0,index) + "<span class='highlight'>" + outputtext[0].innerHTML.substring(index,index+inputvalue.length) + "</span>" + outputtext[0].innerHTML.substring(index + inputvalue.length);
                        //outputtext[0].innerHTML = innerHTML
                        item[i].style.display = "block"
                        //inputvalue = null;
                        
                    }
                    else{
                    item[i].style.display = "none";
                    }
                }
            }
            </script>
            <div class="search">
            <input type="text" id="value" onkeyup="filter()" placeholder="ê²€ìƒ‰í•˜ì‹¤ ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">
            <hr>
            </div>
            <div id ="allvideotext">
            {% for d in df_list %}
            <div class ="videotextlist" style="padding-top: 20px;">
                <span class="timestamps">
                <button href="javascript:void(0);" class="seekTo">{{d.start_timestamps}}</button>
                ~
                <button href="javascript:void(0);" class="seekTo">{{d.timestamps}}</button>
                </span>
                <br>
                <div class = "checked">
                {{d.checked}}
                </div>
            </div>
            {% endfor %}
            </div>            
        </div>
    </div>

    <div id="qna">
        <div class="sidemenutitle">
        QnA
        <button class ='sidemenuclose' onclick="hide('qna');">
        >
        </button>
        </div>
        <hr>
        <div class="sidemenutext">
            <center>
            <button class="recbutton" id="rec">í‚¤ì›Œë“œ ìŒì„±ê²€ìƒ‰ ğŸ”˜</button>
            <br><br>
            <audio style="display: none;" controls>ë…¹ìŒëœ ì†Œë¦¬ë¥¼ ì¬ìƒí•  audio ì—˜ë¦¬ë¨¼íŠ¸</audio>
            </center>
            <div id="rowList"></div>
        </div>
    </div>

    <div id="reco">
        <div class="sidemenutitle">
        ìœ íŠœë¸Œ ì¶”ì²œì˜ìƒ
        <button class ='sidemenuclose' onclick="hide('reco');">
        >
        </button>
        </div>
        <hr style="margin-bottom: 0px;">
        <div class="sidemenutext">
            {%for reco in range(0,10)%}
            <a id = "recourl" target="_blank" href="{{reco_url[reco]}}">
            <div id = "recovideo" style="text-align: center; padding: 10px; margin-bottom: 20px;">
            <img style="width: 100%; height: 100%;" target="_blank"  src="{{reco_thumbnails[reco]}}" alt="ì¸ë„¤ì¼" >
            <p id = "recotitle"> {{reco_title[reco]}} </p>
            </a>
            </div>
            {%endfor%}
        </div>
</div>


</body>

<!-- ì§ˆì˜ì‘ë‹µ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/static/js/record.js"></script>
</html>